/*
 Hype Reactive Content 1.1.7
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeReactiveContent"in window&&(window.HypeReactiveContent=function(){function e(a){return a?_default[a]:_default}function v(a,c){return a?a+"."+c:c}function w(a,c,d){d=d||"";return null==a||a[x]?a:new Proxy(a,{get:function(g,n,b){if("_key"===n)return d;if(n===x)return!0;g=Reflect.get(g,n,b);return"object"===typeof g?w(g,c,v(d,n)):g},set:function(g,n,b,f){var m=Reflect.set(g,n,b,f);c(n,b,g,f);return m}})}function A(a){if(!a[x])return a;var c={},d;for(d in a)if(a.hasOwnProperty(d)){var g=a[d];
c[d]="object"===typeof g?A(g):g}return c}function y(a){return function(){if(!a.timeout){var c=arguments;a.timeout=requestAnimationFrame(function(){a.apply(this,c);a.timeout=null}.bind(this))}}}function r(a,c,d,g){if(d){if("object"!==typeof d)return null}else{if(void 0===d)return null;d=c.customData}g=g||{};if(!1!=="HypeActionEvents"in window)return c.triggerAction(a,{element:g.element,event:{type:g.type},scope:d});try{var n=new Proxy(Object.assign({element:g.element,$elm:g.element},c),{set:function(b,
f,m,p){return Reflect.get(b,f,p)?Reflect.set(b,f,m,p):Reflect.set(d,f,m)},get:function(b,f,m){return(b=Reflect.get(b,f,m))?b:Reflect.get(d,f)},has:function(b,f,m){return b.hasOwnProperty(f)||window[f]?Reflect.has(b,f,m):!0}});return(new Function("$context","with($context){ "+a+"}"))(n)}catch(b){console.error(b)}}function z(a,c,d){return d?r("return "+d,a,null,{element:c,type:"HypeReactiveScope"}):null}function B(a,c){var d=c.closest("[data-scope]");return d?z(a,c,d.getAttribute("data-scope")):null}
function D(a,c,d){!1==="HypeActionEvents"in window&&(c=d.customBehaviorName,"#"!=c.charAt(0)&&/[;=()]/.test(c)&&r(c,a,a.customData))}var C=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch.");_default={scopeSymbol:"\u21e2",visibilitySymbol:"\ud83d\udc41"};C&&(_default=Object.assign(_default,{highlightReactiveContent:!0,highlightVisibilityData:!0,highlightVisibilityArea:!0,highlightContentData:!0,highlightScopeData:!0}));var x=Symbol("isProxy");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=
[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,c,d){function g(b,f,m,p,l){(p=b.closest("["+m+"-action]"))&&r(p.getAttribute(m+"-action"),a,null,{element:b,type:f});if((p=b.closest("["+m+"-behavior]"))&&!n[p.id]){n[p.id]=!0;var h=p.getAttribute(m+"-behavior");y(function(){a.triggerCustomBehaviorNamed(h)})()}}var n={};a.refreshReactiveContent=function(b,f,m,p){void 0===b||void 0===f||/[;=()]/.test(f)||a.triggerCustomBehaviorNamed(v(p._key,b)+" equals "+("string"===
typeof f?'"'+f+'"':f));void 0!==b&&(e("customDataUpdate")&&e("customDataUpdate")(b,f,m,p),a.triggerCustomBehaviorNamed("customData was changed"),a.triggerCustomBehaviorNamed(v(p._key,b)+" was updated"));f=document.getElementById(a.currentSceneId());n={};f.querySelectorAll("[data-content], [data-visibility]").forEach(function(l){var h=l.getAttribute("data-content"),k=l.getAttribute("data-visibility"),q=null,t=null,u=e("scopeSymbol").length;h&&(h=h.trim(),h.startsWith(e("scopeSymbol"))?(h=h.slice(u),
q=B(a,l)):h.includes(e("scopeSymbol"))&&(q=h.slice(0,h.indexOf(e("scopeSymbol"))),q=z(a,l,q),h=h.slice(h.indexOf(e("scopeSymbol"))+u)),h=r("return "+h,a,q,{element:l,type:"HypeReactiveContent"}),h=void 0!==h?h:"",h!==l.innerHTML&&(l.innerHTML=h,b&&g(l,"HypeReactiveContentChanged","data-content-changed",!0,!0)));k&&(k=k.trim(),k.startsWith(e("scopeSymbol"))?(k=k.slice(u),t=q):k.includes(e("scopeSymbol"))&&(t=k.slice(0,k.indexOf(e("scopeSymbol"))),t=z(a,l,t),k=k.slice(k.indexOf(e("scopeSymbol"))+u)),
k=r("return "+k,a,t,{element:l,type:"HypeReactiveVisibility"}),"none"==l.style.display&&(l.style.display="block"),k=k?"visible":"hidden",k!==l.style.visibility&&(l.style.visibility=k,b&&g(l,"HypeReactiveVisibiltyChanged","data-visibility-changed",!0,!0)))});!1!=="HypeDataMagic"in window&&HypeDataMagic.getDefault("refreshOnCustomData")&&a.refresh()};a.refreshReactiveContentDebounced=y(a.refreshReactiveContent);a.resolveClosestScope=function(b){return B(a,b)};a.enableReactiveCustomData=function(b){a.customData=
Object.assign(a.customData,b||{});a.customData=w(a.customData,a.refreshReactiveContentDebounced)};a.enableReactiveCustomData(e("customData")||{});a.functions().HypeReactiveContent&&a.functions().HypeReactiveContent(a,c,d)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,c,d){a.refreshReactiveContentDebounced()}});!1==="HypeActionEvents"in window&&window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:D});C&&window.addEventListener("DOMContentLoaded",
function(a){e("highlightReactiveContent")&&(a=[],e("highlightContentData")&&(a=a.concat(["[data-content*='"+e("scopeSymbol")+"']{--color:#ffcccc;}","[data-content]{--color:#f8d54f;outline:1px solid #f8d54f;position:relative}","[data-content]::before{content:attr(data-content);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),
e("highlightVisibilityData")&&(a=a.concat(["[data-visibility*='"+e("scopeSymbol")+"']{--color:#ffcccc;}","[data-visibility]{--color:#f8d54f;}","[data-visibility]::before{content:'"+e("visibilitySymbol")+" ' attr(data-visibility);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),
e("highlightScopeData")&&(a=a.concat(["[data-scope]{--color:#ffcccc; outline:1px dashed var(--color);}","[data-scope]::before{content:attr(data-scope);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;bottom:-15px;left:-1px;border-bottom-right-radius:.2rem;border-bottom-left-radius:.2rem}"])),e("highlightContentData")&&e("highlightVisibilityData")&&
(a=a.concat(["[data-content][data-visibility]::before{content: attr(data-content) ' "+e("visibilitySymbol")+" ' attr(data-visibility)}"])),e("highlightVisibilityArea")&&(a=a.concat(["[data-visibility]::after {content:'';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,var(--color) 10px,var(--color) 20px);opacity: .1;}"])),a.forEach(function(c){return document.styleSheets[0].insertRule(c,0)}))});return{version:"1.1.7",
setDefault:function(a,c){"object"==typeof a?_default=a:_default[a]=c},getDefault:e,enableReactiveObject:w,disableReactiveObject:A,debounceByRequestFrame:y}}());
