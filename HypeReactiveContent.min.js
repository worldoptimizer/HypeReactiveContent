/*
 Hype Reactive Content 1.1.1
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeReactiveContent"in window&&(window.HypeReactiveContent=function(){function f(a){return a?_default[a]:_default}function q(a,e){return null==a||a[r]?a:new Proxy(a,{get:function(c,g,k){if(g===r)return!0;c=Reflect.get(c,g,k);return"object"===typeof c?q(c,e):c},set:function(c,g,k,d){var b=Reflect.set(c,g,k,d);e(g,k,c,d);return b}})}function u(a){if(!a[r])return a;var e={},c;for(c in a)if(a.hasOwnProperty(c)){var g=a[c];e[c]="object"===typeof g?u(g):g}return e}function v(a){return function(){if(!a.timeout){var e=
arguments;a.timeout=requestAnimationFrame(function(){a.apply(this,e);a.timeout=null}.bind(this))}}}function n(a,e,c,g){if(c){if("object"!==typeof c)return null}else c=e.customData;if(!1!=="HypeActionEvents"in window)return g=g||{},e.triggerAction(a,{element:g.element,event:{type:g.type},scope:c});try{var k=new Proxy(Object.assign({},e),{set:function(d,b,h,l){return Reflect.get(d,b,l)?Reflect.set(d,b,h,l):Reflect.set(c,b,h)},get:function(d,b,h){return(d=Reflect.get(d,b,h))?d:Reflect.get(c,b)},has:function(d,
b,h){return d.hasOwnProperty(b)||window[b]?Reflect.has(d,b,h):!0}});return(new Function("$context","with($context){ "+a+"}"))(k)}catch(d){console.error(d)}}function t(a,e,c){return c?n("return "+c,a,null,{element:e,type:"HypeReactiveScope"}):null}function w(a,e,c){!1==="HypeActionEvents"in window&&(e=c.customBehaviorName,"#"!=e.charAt(0)&&/[;=()]/.test(e)&&n(e,a))}var x=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch.");_default={highlightReactiveContent:!0,highlightVisibilityData:!0,
highlightVisibilityArea:!0,highlightContentData:!0,highlightScopeData:!0,scopeSymbol:"\u21e2",scopeSymbolLength:1,visibilitySymbol:"\ud83d\udc41"};var r=Symbol("isProxy");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,e,c){a.refreshReactiveContent=function(g,k){void 0===g||void 0===k||/[;=()]/.test(k)||a.triggerCustomBehaviorNamed(g+" equals "+("string"===typeof k?'"'+k+'"':k));void 0!==g&&(f("customDataUpdate")&&
f("customDataUpdate")(g,k),a.triggerCustomBehaviorNamed("customData was changed"),a.triggerCustomBehaviorNamed(g+" was updated"));document.getElementById(a.currentSceneId()).querySelectorAll("[data-content], [data-visibility]").forEach(function(d){var b=d.getAttribute("data-content"),h=d.getAttribute("data-visibility"),l=null,m=null,p=f("scopeSymbolLength");b&&(b=b.trim(),b.startsWith(f("scopeSymbol"))?(b=b.slice(p),l=(l=d.closest("[data-scope]"))?t(a,d,l.getAttribute("data-scope")):null):b.includes(f("scopeSymbol"))&&
(l=b.slice(0,b.indexOf(f("scopeSymbol"))),l=t(a,d,l),b=b.slice(b.indexOf(f("scopeSymbol"))+p)),b=n("return "+b,a,l,{element:d,type:"HypeReactiveContent"}),d.innerHTML=void 0!==b?b:"");h&&(h=h.trim(),h.startsWith(f("scopeSymbol"))?(h=h.slice(p),m=l):h.includes(f("scopeSymbol"))&&(m=h.slice(0,h.indexOf(f("scopeSymbol"))),m=t(a,d,m),h=h.slice(h.indexOf(f("scopeSymbol"))+p)),h=n("return "+h,a,m,{element:d,type:"HypeReactiveVisibility"}),"none"==d.style.display&&(d.style.display="block"),d.style.visibility=
h?"visible":"hidden")});!1!=="HypeDataMagic"in window&&HypeDataMagic.getDefault("refreshOnCustomData")&&a.refresh()};a.refreshReactiveContentDebounced=v(a.refreshReactiveContent);a.enableReactiveCustomData=function(g){a.customData=Object.assign(a.customData,g||{});a.customData=q(a.customData,a.refreshReactiveContentDebounced)};a.enableReactiveCustomData(f("customData")||{});a.functions().HypeReactiveContent&&a.functions().HypeReactiveContent(a,e,c)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",
callback:function(a,e,c){a.refreshReactiveContentDebounced()}});!1==="HypeActionEvents"in window&&window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:w});x&&window.addEventListener("DOMContentLoaded",function(a){f("highlightReactiveContent")&&(a=[],f("highlightContentData")&&(a=a.concat(["[data-content*='"+f("scopeSymbol")+"']{--color:#ffcccc;}","[data-content]{--color:#f8d54f;outline:1px solid #f8d54f;position:relative}","[data-content]::before{content:attr(data-content);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),
f("highlightVisibilityData")&&(a=a.concat(["[data-visibility*='"+f("scopeSymbol")+"']{--color:#ffcccc;}","[data-visibility]{--color:#f8d54f;}","[data-visibility]::before{content:'"+f("visibilitySymbol")+" ' attr(data-visibility);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),
f("highlightScopeData")&&(a=a.concat(["[data-scope]{--color:#ffcccc; outline:1px dashed var(--color);}","[data-scope]::before{content:attr(data-scope);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;bottom:-15px;left:-1px;border-bottom-right-radius:.2rem;border-bottom-left-radius:.2rem}"])),f("highlightContentData")&&f("highlightVisibilityData")&&
(a=a.concat(["[data-content][data-visibility]::before{content: attr(data-content) ' "+f("visibilitySymbol")+" ' attr(data-visibility)}"])),a=a.concat(["[data-visibility]::after {content:'';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,var(--color) 10px,var(--color) 20px);opacity: .25;}"]),a.forEach(function(e){return document.styleSheets[0].insertRule(e,0)}))});return{version:"1.1.1",setDefault:function(a,e){"object"==
typeof a?_default=a:_default[a]=e},getDefault:f,enableReactiveObject:q,disableReactiveObject:u,debounceByRequestFrame:v}}());
