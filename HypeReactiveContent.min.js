/*
 Hype Reactive Content 1.1.9
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeReactiveContent"in window&&(window.HypeReactiveContent=function(){function n(a){return a?_default[a]:_default}function t(a,c){return a?a+"."+c:c}function u(a,c,b){b=b||"";return null==a||a[v]?a:new Proxy(a,{get:function(e,h,d){if("_key"===h)return b;if(h===v)return!0;e=Reflect.get(e,h,d);return"object"===typeof e?u(e,c,t(b,h)):e},set:function(e,h,d,f){var k=Reflect.set(e,h,d,f);c(h,d,e,f);return k}})}function y(a){if(!a[v])return a;var c={},b;for(b in a)if(a.hasOwnProperty(b)){var e=a[b];
c[b]="object"===typeof e?y(e):e}return c}function w(a){return function(){if(!a.timeout){var c=arguments;a.timeout=requestAnimationFrame(function(){a.apply(this,c);a.timeout=null}.bind(this))}}}function q(a,c,b,e){if(b){if("object"!==typeof b)return null}else{if(void 0===b)return null;b=c.customData}e=e||{};if(!1!=="HypeActionEvents"in window)return c.triggerAction(a,{element:e.element,event:{type:e.type},scope:b});try{var h=new Proxy(Object.assign({element:e.element,$elm:e.element},c),{set:function(d,
f,k,l){return Reflect.get(d,f,l)?Reflect.set(d,f,k,l):Reflect.set(b,f,k)},get:function(d,f,k){return(d=Reflect.get(d,f,k))?d:Reflect.get(b,f)},has:function(d,f,k){return d.hasOwnProperty(f)||window[f]?Reflect.has(d,f,k):!0}});return(new Function("$context","with($context){ "+a+"}"))(h)}catch(d){console.error(d)}}function z(a,c,b){return b?q("return "+b,a,null,{element:c,type:"HypeReactiveScope"}):null}function A(a,c){var b=c.closest("[data-scope]");return b?z(a,c,b.getAttribute("data-scope")):null}
function x(a,c,b){var e=n("scopeSymbol"),h=e.length,d=null;a=a.trim();a.startsWith(e)?(a=a.slice(h),d=A(c,b)):a.includes(e)&&(d=a.slice(0,a.indexOf(e)),d=z(c,b,d),a=a.slice(a.indexOf(e)+h));return{value:a,scope:d}}function C(a,c,b){!1==="HypeActionEvents"in window&&(c=b.customBehaviorName,"#"!=c.charAt(0)&&/[;=()]/.test(c)&&q(c,a,a.customData))}var B=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch.");_default={scopeSymbol:"\u21e2",visibilitySymbol:"\ud83d\udc41"};B&&(_default=Object.assign(_default,
{highlightReactiveContent:!0,highlightVisibilityData:!0,highlightVisibilityArea:!0,highlightContentData:!0,highlightScopeData:!0,highlightEffectData:!0}));var v=Symbol("isProxy");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,c,b){function e(d,f,k,l,g){(l=d.closest("["+k+"-action]"))&&q(l.getAttribute(k+"-action"),a,null,{element:d,type:f});if((l=d.closest("["+k+"-behavior]"))&&!h[l.id]){h[l.id]=!0;
var m=l.getAttribute(k+"-behavior");w(function(){a.triggerCustomBehaviorNamed(m)})()}}var h={};a.refreshReactiveContent=function(d,f,k,l){void 0===d||void 0===f||/[;=()]/.test(f)||a.triggerCustomBehaviorNamed(t(l._key,d)+" equals "+("string"===typeof f?'"'+f+'"':f));void 0!==d&&(n("customDataUpdate")&&n("customDataUpdate")(d,f,k,l),a.triggerCustomBehaviorNamed("customData was changed"),a.triggerCustomBehaviorNamed(t(l._key,d)+" was updated"));f=document.getElementById(a.currentSceneId());h={};f.querySelectorAll("[data-visibility], [data-content], [data-effect]").forEach(function(g){var m=
g.getAttribute("data-content"),p=g.getAttribute("data-visibility"),r=g.getAttribute("data-effect");p&&(p=x(p,a,g),p=q("return "+p.value,a,p.scope,{element:g,type:"HypeReactiveVisibility"}),"none"==g.style.display&&(g.style.display="block"),p=p?"visible":"hidden",p!==g.style.visibility&&(g.style.visibility=p,d&&e(g,"HypeReactiveVisibiltyChanged","data-visibility-changed",!0,!0)));r&&(r=x(r,a,g),q(r.value,a,r.scope,{element:g,type:"HypeReactiveEffect"}));m&&(m=x(m,a,g),m=q("return "+m.value,a,m.scope,
{element:g,type:"HypeReactiveContent"}),m=void 0!==m?m:"",m!==g.innerHTML&&(g.innerHTML=m,d&&e(g,"HypeReactiveContentChanged","data-content-changed",!0,!0)))});!1!=="HypeDataMagic"in window&&HypeDataMagic.getDefault("refreshOnCustomData")&&a.refresh()};a.refreshReactiveContentDebounced=w(a.refreshReactiveContent);a.resolveClosestScope=function(d){return A(a,d)};a.enableReactiveCustomData=function(d){a.customData=Object.assign(a.customData,d||{});a.customData=u(a.customData,a.refreshReactiveContentDebounced)};
a.enableReactiveCustomData(n("customData")||{});a.functions().HypeReactiveContent&&a.functions().HypeReactiveContent(a,c,b)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,c,b){a.refreshReactiveContentDebounced()}});!1==="HypeActionEvents"in window&&window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:C});B&&window.addEventListener("DOMContentLoaded",function(a){if(n("highlightReactiveContent")){var c=[];["content","visibility","scope",
"effect"].forEach(function(b){var e=b.charAt(0).toUpperCase()+b.slice(1);n("highlight"+e+"Data")&&(c.push("[data-"+b+"*='"+n("scopeSymbol")+"']{--color:#ffcccc !important;}"),c.push("[data-"+b+"]{--color:#f8d54f;outline:1px dotted var(--color);position:relative}"),"scope"===b?c.push("[data-"+b+"]::before{content:attr(data-"+b+");font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;bottom:-15px;left:-1px;border-bottom-right-radius:.2rem;border-bottom-left-radius:.2rem}"):
(c.push("[data-"+b+"]::before{content:attr(data-"+b+");font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"),c.push("[data-"+b+"][data-visibility]::before{content: attr(data-"+b+") ' "+n("visibilitySymbol")+" ' attr(data-visibility)}")))});n("highlightVisibilityArea")&&
c.push("[data-visibility]::after {content:'';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,var(--color) 10px,var(--color) 20px);opacity: .1;}");c.forEach(function(b){document.styleSheets[0].insertRule(b,0)})}});return{version:"1.1.9",setDefault:function(a,c){"object"==typeof a?_default=a:_default[a]=c},getDefault:n,enableReactiveObject:u,disableReactiveObject:y,debounceByRequestFrame:w}}());
