/*
 Hype Reactive Content 1.1.4
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeReactiveContent"in window&&(window.HypeReactiveContent=function(){function d(a){return a?_default[a]:_default}function t(a,c){return null==a||a[u]?a:new Proxy(a,{get:function(b,e,m){if(e===u)return!0;b=Reflect.get(b,e,m);return"object"===typeof b?t(b,c):b},set:function(b,e,m,h){var l=Reflect.set(b,e,m,h);c(e,m,b,h);return l}})}function w(a){if(!a[u])return a;var c={},b;for(b in a)if(a.hasOwnProperty(b)){var e=a[b];c[b]="object"===typeof e?w(e):e}return c}function x(a){return function(){if(!a.timeout){var c=
arguments;a.timeout=requestAnimationFrame(function(){a.apply(this,c);a.timeout=null}.bind(this))}}}function q(a,c,b,e){if(b){if("object"!==typeof b)return null}else{if(void 0===b)return null;b=c.customData}if(!1!=="HypeActionEvents"in window)return e=e||{},c.triggerAction(a,{element:e.element,event:{type:e.type},scope:b});try{var m=new Proxy(Object.assign({},c),{set:function(h,l,f,g){return Reflect.get(h,l,g)?Reflect.set(h,l,f,g):Reflect.set(b,l,f)},get:function(h,l,f){return(h=Reflect.get(h,l,f))?
h:Reflect.get(b,l)},has:function(h,l,f){return h.hasOwnProperty(l)||window[l]?Reflect.has(h,l,f):!0}});return(new Function("$context","with($context){ "+a+"}"))(m)}catch(h){console.error(h)}}function v(a,c,b){return b?q("return "+b,a,null,{element:c,type:"HypeReactiveScope"}):null}function z(a,c,b){!1==="HypeActionEvents"in window&&(c=b.customBehaviorName,"#"!=c.charAt(0)&&/[;=()]/.test(c)&&q(c,a,a.customData))}var y=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch.");_default={scopeSymbol:"\u21e2",
visibilitySymbol:"\ud83d\udc41"};y&&(_default=Object.assign(_default,{highlightReactiveContent:!0,highlightVisibilityData:!0,highlightVisibilityArea:!0,highlightContentData:!0,highlightScopeData:!0}));var u=Symbol("isProxy");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,c,b){a.refreshReactiveContent=function(e,m,h,l){void 0===e||void 0===m||/[;=()]/.test(m)||a.triggerCustomBehaviorNamed(e+" equals "+
("string"===typeof m?'"'+m+'"':m));void 0!==e&&(d("customDataUpdate")&&d("customDataUpdate")(e,m,h,l),a.triggerCustomBehaviorNamed("customData was changed"),a.triggerCustomBehaviorNamed(e+" was updated"));document.getElementById(a.currentSceneId()).querySelectorAll("[data-content], [data-visibility]").forEach(function(f){var g=f.getAttribute("data-content"),k=f.getAttribute("data-visibility"),n=null,p=null,r=d("scopeSymbol").length;g&&(g=g.trim(),g.startsWith(d("scopeSymbol"))?(g=g.slice(r),n=(n=
f.closest("[data-scope]"))?v(a,f,n.getAttribute("data-scope")):null):g.includes(d("scopeSymbol"))&&(n=g.slice(0,g.indexOf(d("scopeSymbol"))),n=v(a,f,n),g=g.slice(g.indexOf(d("scopeSymbol"))+r)),g=q("return "+g,a,n,{element:f,type:"HypeReactiveContent"}),f.innerHTML=void 0!==g?g:"");k&&(k=k.trim(),k.startsWith(d("scopeSymbol"))?(k=k.slice(r),p=n):k.includes(d("scopeSymbol"))&&(p=k.slice(0,k.indexOf(d("scopeSymbol"))),p=v(a,f,p),k=k.slice(k.indexOf(d("scopeSymbol"))+r)),k=q("return "+k,a,p,{element:f,
type:"HypeReactiveVisibility"}),"none"==f.style.display&&(f.style.display="block"),f.style.visibility=k?"visible":"hidden")});!1!=="HypeDataMagic"in window&&HypeDataMagic.getDefault("refreshOnCustomData")&&a.refresh()};a.refreshReactiveContentDebounced=x(a.refreshReactiveContent);a.enableReactiveCustomData=function(e){a.customData=Object.assign(a.customData,e||{});a.customData=t(a.customData,a.refreshReactiveContentDebounced)};a.enableReactiveCustomData(d("customData")||{});a.functions().HypeReactiveContent&&
a.functions().HypeReactiveContent(a,c,b)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,c,b){a.refreshReactiveContentDebounced()}});!1==="HypeActionEvents"in window&&window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:z});y&&window.addEventListener("DOMContentLoaded",function(a){d("highlightReactiveContent")&&(a=[],d("highlightContentData")&&(a=a.concat(["[data-content*='"+d("scopeSymbol")+"']{--color:#ffcccc;}","[data-content]{--color:#f8d54f;outline:1px solid #f8d54f;position:relative}",
"[data-content]::before{content:attr(data-content);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),d("highlightVisibilityData")&&(a=a.concat(["[data-visibility*='"+d("scopeSymbol")+"']{--color:#ffcccc;}","[data-visibility]{--color:#f8d54f;}","[data-visibility]::before{content:'"+
d("visibilitySymbol")+" ' attr(data-visibility);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;top:-15px;left:-1px;border-top-right-radius:.2rem;border-top-left-radius:.2rem;}"])),d("highlightScopeData")&&(a=a.concat(["[data-scope]{--color:#ffcccc; outline:1px dashed var(--color);}","[data-scope]::before{content:attr(data-scope);font-family:Helvetica,Arial;line-height:11px;font-size:9px;font-weight:normal;padding:2px 5px;white-space:nowrap;max-height:16px;color:#000;text-align:center;background-color:var(--color);position:absolute;bottom:-15px;left:-1px;border-bottom-right-radius:.2rem;border-bottom-left-radius:.2rem}"])),
d("highlightContentData")&&d("highlightVisibilityData")&&(a=a.concat(["[data-content][data-visibility]::before{content: attr(data-content) ' "+d("visibilitySymbol")+" ' attr(data-visibility)}"])),d("highlightVisibilityArea")&&(a=a.concat(["[data-visibility]::after {content:'';position: absolute;top: 0;left: 0;width: 100%;height: 100%;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,var(--color) 10px,var(--color) 20px);opacity: .1;}"])),a.forEach(function(c){return document.styleSheets[0].insertRule(c,
0)}))});return{version:"1.1.4",setDefault:function(a,c){"object"==typeof a?_default=a:_default[a]=c},getDefault:d,enableReactiveObject:t,disableReactiveObject:w,debounceByRequestFrame:x}}());
