/*
 Hype Reactive Content 1.1.1
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
*/
!1==="HypeReactiveContent"in window&&(window.HypeReactiveContent=function(){function h(a){return a?_default[a]:_default}function q(a,e){return null==a||a[r]?a:new Proxy(a,{get:function(c,f,k){if(f===r)return!0;c=Reflect.get(c,f,k);return"object"===typeof c?q(c,e):c},set:function(c,f,k,d){var b=Reflect.set(c,f,k,d);e(f,k,c,d);return b}})}function u(a){if(!a[r])return a;var e={},c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];e[c]="object"===typeof f?u(f):f}return e}function v(a){return function(){if(!a.timeout){var e=
arguments;a.timeout=requestAnimationFrame(function(){a.apply(this,e);a.timeout=null}.bind(this))}}}function n(a,e,c,f){if(c){if("object"!==typeof c)return null}else c=e.customData;if(!1!=="HypeActionEvents"in window)return f=f||{},e.triggerAction(a,{element:f.element,event:{type:f.type},scope:c});try{var k=new Proxy(Object.assign({},e),{set:function(d,b,g,l){return Reflect.get(d,b,l)?Reflect.set(d,b,g,l):Reflect.set(c,b,g)},get:function(d,b,g){return(d=Reflect.get(d,b,g))?d:Reflect.get(c,b)},has:function(d,
b,g){return d.hasOwnProperty(b)||window[b]?Reflect.has(d,b,g):!0}});return(new Function("$context","with($context){ "+a+"}"))(k)}catch(d){console.error(d)}}function t(a,e,c){return c?n("return "+c,a,null,{element:e,type:"HypeReactiveScope"}):null}function w(a,e,c){!1==="HypeActionEvents"in window&&(e=c.customBehaviorName,"#"!=e.charAt(0)&&/[;=()]/.test(e)&&n(e,a))}_default={highlightReactiveContent:!0,highlightVisibilityData:!0,highlightVisibilityArea:!0,highlightContentData:!0,highlightScopeData:!0,
scopeSymbol:"\u21e2",scopeSymbolLength:1,visibilitySymbol:"\ud83d\udc41"};var r=Symbol("isProxy");!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(a,e,c){a.refreshReactiveContent=function(f,k){void 0===f||void 0===k||/[;=()]/.test(k)||a.triggerCustomBehaviorNamed(f+" equals "+("string"===typeof k?'"'+k+'"':k));void 0!==f&&(h("customDataUpdate")&&h("customDataUpdate")(f,k),a.triggerCustomBehaviorNamed("customData was changed"),
a.triggerCustomBehaviorNamed(f+" was updated"));document.getElementById(a.currentSceneId()).querySelectorAll("[data-content], [data-visibility]").forEach(function(d){var b=d.getAttribute("data-content"),g=d.getAttribute("data-visibility"),l=null,m=null,p=h("scopeSymbolLength");b&&(b=b.trim(),b.startsWith(h("scopeSymbol"))?(b=b.slice(p),l=(l=d.closest("[data-scope]"))?t(a,d,l.getAttribute("data-scope")):null):b.includes(h("scopeSymbol"))&&(l=b.slice(0,b.indexOf(h("scopeSymbol"))),l=t(a,d,l),b=b.slice(b.indexOf(h("scopeSymbol"))+
p)),b=n("return "+b,a,l,{element:d,type:"HypeReactiveContent"}),d.innerHTML=void 0!==b?b:"");g&&(g=g.trim(),g.startsWith(h("scopeSymbol"))?(g=g.slice(p),m=l):g.includes(h("scopeSymbol"))&&(m=g.slice(0,g.indexOf(h("scopeSymbol"))),m=t(a,d,m),g=g.slice(g.indexOf(h("scopeSymbol"))+p)),g=n("return "+g,a,m,{element:d,type:"HypeReactiveVisibility"}),"none"==d.style.display&&(d.style.display="block"),d.style.visibility=g?"visible":"hidden")});!1!=="HypeDataMagic"in window&&HypeDataMagic.getDefault("refreshOnCustomData")&&
a.refresh()};a.refreshReactiveContentDebounced=v(a.refreshReactiveContent);a.enableReactiveCustomData=function(f){a.customData=Object.assign(a.customData,f||{});a.customData=q(a.customData,a.refreshReactiveContentDebounced)};a.enableReactiveCustomData(h("customData")||{});a.functions().HypeReactiveContent&&a.functions().HypeReactiveContent(a,e,c)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(a,e,c){a.refreshReactiveContentDebounced()}});!1==="HypeActionEvents"in
window&&window.HYPE_eventListeners.push({type:"HypeTriggerCustomBehavior",callback:w});return{version:"1.1.1",setDefault:function(a,e){"object"==typeof a?_default=a:_default[a]=e},getDefault:h,enableReactiveObject:q,disableReactiveObject:u,debounceByRequestFrame:v}}());
